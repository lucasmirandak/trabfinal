<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel='stylesheet' type='text/css' media='screen' href='cadastrar.css'>
    <title>cadastro</title>
</head>

<body>
    <form>
        <div>
            <label>Nome</label>
            <input name="nome">
        </div>
        <div>
            <label>Email</label>
            <input name="email">
        </div>
        <div>
            <label>Senha<label>
                    <input name="senha">
        </div>
        <div>
            <button id="btCadastro">
                Cadastro
            </button>
            <button id="btVoltar">
                Voltar
            </button>
        </div>
    </form>
    <script>
        const form = document.querySelector("form")
        const btVoltar = document.querySelector("#btVoltar")

        form.addEventListener("submit", async event => {
            event.preventDefault()
            const method = 'POST'
            const url = '/users'
            const headers = { 'Content-Type': 'application/json' }
            const nome = form.nome.value
            const email = form.email.value
            const senha = form.senha.value
            const body = JSON.stringify({ nome, email, senha })

            if (nome.trim() == "")
                return alert("Campo NOME Vazio")
            
            if (email.trim() == "")
                return alert("Campo EMAIL Vazio")
            
            if (senha == "") 
                return alert("Campo SENHA vazio")

            const response = await fetch(url, { method, headers, body })
            if (!response.ok)
                return console.error('Error:', response.statusText)
            const responseData = await response.json()
            alert("cadastrado")
            location.href = "/"
        })

        btVoltar.addEventListener("click", () => {
            window.location.href = "/"
        })
    </script>
</body>

</html>